#!/usr/bin/env ruby
require 'gli'
require 'suploy-scli'

include GLI::App

program_desc 'The project aims to provide a consistent and simple to use API to
access the core suploy functionality. This is important to separate the
repository and docker management from the web interface and thereby simplifying
the execution of administrative tasks from the command line.'

version SuployScli::VERSION

desc 'Handle docker database containers'
command :database do |c|
  c.desc 'create a new database container'
  c.command :create do |create|
    create.action do |global_options,options,args|
      puts "Creating a database just for you. Hang on a second..."
      puts Scli.database_create
    end
  end
  c.desc 'show all database containers'
  c.command :list do |list|
    list.action do |global_options,options,args|
      puts "list all containers here"
    end
  end
end

pre do |global,command,options,args|
  # Pre logic here
  # Return true to proceed; false to abort and not call the
  # chosen command
  # Use skips_pre before a command to skip this block
  # on that command only
  true
end

post do |global,command,options,args|
  # Post logic here
  # Use skips_post before a command to skip this
  # block on that command only
end

on_error do |exception|
  # Error logic here
  # return false to skip default error handling
  true
end

exit run(ARGV)
